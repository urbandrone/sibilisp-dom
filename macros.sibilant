(macro dom-is-elem? (a)
  `(and (exists? @a) (instance-of? @a HTMLElement)))

(macro dom-is-node? (a)
  `(and (exists? @a) (instance-of? @a Node)))

(macro dom-is-convertable? (a)
  `(or (is-a @a NodeList)
       (is-a @a HTMLCollection)))

(macro dom-is-elem-list? (as)
  (with-gensyms (el)
    `(and (list? @as)
          (.every @as (#(@el) (or (dom-is-node? @el) (dom-is-elem? @el)))))))
